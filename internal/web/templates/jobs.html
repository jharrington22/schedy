{{define "content"}}
<h1>Your Jobs</h1>
<p class="hint">Jobs run automatically during their attempt window.</p>

{{if not .Jobs}}
  <div class="card">
    <p>No jobs yet.</p>
    <p><a href="/jobs/new">Create one</a></p>
  </div>
{{else}}
<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Venue</th>
      <th>Res Date</th>
      <th>Preferred Times</th>
      <th>Window (UTC)</th>
      <th>Status</th>
      <th>Last Attempt</th>
      <th>Booked</th>
      <th>Last Error</th>
    </tr>
  </thead>
  <tbody>
  {{range .Jobs}}
    <tr>
      <td>{{.Name}}</td>
      <td>{{.VenueID}}</td>
      <td>{{.ReservationDate.Format "2006-01-02"}}</td>
      <td>{{range $i,$t := .PreferredTimes}}{{if $i}}, {{end}}{{$t}}{{end}}</td>
      <td>{{.WindowStartAt.Format "2006-01-02 15:04:05"}} â†’ {{.WindowEndAt.Format "15:04:05"}}</td>
      <td>{{.Status}}</td>
      <td>{{if .LastAttemptAt}}{{.LastAttemptAt.Format "2006-01-02 15:04:05"}}{{end}}</td>
      <td>{{if .BookedAt}}{{.BookedAt.Format "2006-01-02 15:04:05"}}{{end}}</td>
      <td class="mono">{{if .LastError}}{{.LastError}}{{end}}</td>
    </tr>
  {{end}}
  </tbody>
</table>
{{end}}
{{end}}
